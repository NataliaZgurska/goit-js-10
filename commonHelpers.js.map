{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from \"flatpickr\";\nimport \"flatpickr/dist/flatpickr.min.css\";\nimport iziToast from \"izitoast\";\nimport 'izitoast/dist/css/iziToast.min.css';\n\n\nconst btn = document.querySelector('button');\n\nconst daysSet = document.querySelector('span[data-days]');\nconst hoursSet = document.querySelector('span[data-hours]');\nconst minutesSet = document.querySelector('span[data-minutes]');\nconst secondsSet = document.querySelector('span[data-seconds]');\n\nlet userSelectedDate;\nlet difference;\nlet timerIntervalId;\n\nbtn.disabled = true;\nbtn.classList.add('disable-btn');\n\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    // console.log(selectedDates[0]);\n       userSelectedDate = selectedDates[0];\n      \n      if (userSelectedDate > new Date()) {\n        // console.log('userSelectedDate: ', userSelectedDate);\n     \n        btn.disabled = false;\n        btn.classList.remove('disable-btn');\n    } else {\n    //   btn.setAttribute('disabled', true);\n        btn.classList.add('disable-btn');\n        // console.log('wrong date: ', userSelectedDate);\n        \n          iziToast.show({\n            close: true,\n            message: 'Оберіть дату в майбутньому',\n            messageColor: '#FFFFFF',\n            backgroundColor: '#B51B1B',\n              position: 'topCenter',\n                close: true,\n               timeout: 10000\n        });\n    }\n},\n};\n \nflatpickr('#datetime-picker', options);\n\nbtn.addEventListener('click', onBtnStartClick);\n\nfunction onBtnStartClick(e) {\n    document.addEventListener('keydown', onKeyClick); \n    difference = userSelectedDate - new Date();\n    console.log('click btn difference', difference);\n\n\n    timerIntervalId = setInterval(() => {\n        difference -= 1000;\n\n    if (difference>1000) {\n       // конвертуємо ms в дні-години-хвилини-секунди і форматуємо в двозначний вигляд \n        const difObj = convertMs(difference);\n        const difArray = Object.values(difObj).map((elem) => String(elem).padStart(2, 0));\n        // виводимо дні-години-хвилини-секунди на екран\n        daysSet.textContent = difArray[0];\n        hoursSet.textContent = difArray[1];\n        minutesSet.textContent = difArray[2];\n        secondsSet.textContent = difArray[3];\n    } else {\n        clearInterval(timerIntervalId);\n        secondsSet.textContent = '00';\n        console.log('Цей час настав!');\n        greeting();\n    }\n\n }, 1000);\n  \n}\n\nfunction convertMs(ms) {\n  // Number of milliseconds per unit of time\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n   const days = Math.floor(ms / day);\n   const hours = Math.floor((ms % day) / hour);\n   const minutes = Math.floor(((ms % day) % hour) / minute);\n   const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  return { days, hours, minutes, seconds };\n}\n\nfunction onKeyClick(e) {\n  if (e.code === 'Escape') {\n    clearInterval(timerIntervalId);\n      console.log('таймер зупинено');\n    //    document.addEventListener('keydown', onKeyClick); \n  } \n}\n\nfunction greeting() {\n    iziToast.show({\n        \n            close: true,\n        message: 'Цей час настав!',\n         \n            messageColor: '#060695',\n            backgroundColor: '#ffff00',\n              position: 'topCenter',\n                close: true,\n               timeout: 10000\n        });\n}"],"names":["btn","daysSet","hoursSet","minutesSet","secondsSet","userSelectedDate","difference","timerIntervalId","options","selectedDates","iziToast","flatpickr","onBtnStartClick","onKeyClick","difObj","convertMs","difArray","elem","greeting","ms","days","hours","minutes","seconds"],"mappings":"+IAMA,MAAMA,EAAM,SAAS,cAAc,QAAQ,EAErCC,EAAU,SAAS,cAAc,iBAAiB,EAClDC,EAAW,SAAS,cAAc,kBAAkB,EACpDC,EAAa,SAAS,cAAc,oBAAoB,EACxDC,EAAa,SAAS,cAAc,oBAAoB,EAE9D,IAAIC,EACAC,EACAC,EAEJP,EAAI,SAAW,GACfA,EAAI,UAAU,IAAI,aAAa,EAE/B,MAAMQ,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CAElBJ,EAAmBI,EAAc,GAE9BJ,EAAmB,IAAI,MAGzBL,EAAI,SAAW,GACfA,EAAI,UAAU,OAAO,aAAa,IAGlCA,EAAI,UAAU,IAAI,aAAa,EAG7BU,EAAS,KAAK,CACZ,MAAO,GACP,QAAS,6BACT,aAAc,UACd,gBAAiB,UACf,SAAU,YACR,MAAO,GACR,QAAS,GACxB,CAAS,EAET,CACA,EAEAC,EAAU,mBAAoBH,CAAO,EAErCR,EAAI,iBAAiB,QAASY,CAAe,EAE7C,SAASA,EAAgB,EAAG,CACxB,SAAS,iBAAiB,UAAWC,CAAU,EAC/CP,EAAaD,EAAmB,IAAI,KACpC,QAAQ,IAAI,uBAAwBC,CAAU,EAG9CC,EAAkB,YAAY,IAAM,CAGpC,GAFID,GAAc,IAEdA,EAAW,IAAM,CAEjB,MAAMQ,EAASC,EAAUT,CAAU,EAC7BU,EAAW,OAAO,OAAOF,CAAM,EAAE,IAAKG,GAAS,OAAOA,CAAI,EAAE,SAAS,EAAG,CAAC,CAAC,EAEhFhB,EAAQ,YAAce,EAAS,GAC/Bd,EAAS,YAAcc,EAAS,GAChCb,EAAW,YAAca,EAAS,GAClCZ,EAAW,YAAcY,EAAS,EAC1C,MACQ,cAAcT,CAAe,EAC7BH,EAAW,YAAc,KACzB,QAAQ,IAAI,iBAAiB,EAC7Bc,GAGN,EAAE,GAAI,CAER,CAEA,SAASH,EAAUI,EAAI,CAOpB,MAAMC,EAAO,KAAK,MAAMD,EAAK,KAAG,EAC1BE,EAAQ,KAAK,MAAOF,EAAK,MAAO,IAAI,EACpCG,EAAU,KAAK,MAAQH,EAAK,MAAO,KAAQ,GAAM,EACjDI,EAAU,KAAK,MAASJ,EAAK,MAAO,KAAQ,IAAU,GAAM,EAEnE,MAAO,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC,CAEA,SAASV,EAAW,EAAG,CACjB,EAAE,OAAS,WACb,cAAcN,CAAe,EAC3B,QAAQ,IAAI,iBAAiB,EAGnC,CAEA,SAASW,GAAW,CAChBR,EAAS,KAAK,CAEN,MAAO,GACX,QAAS,kBAEL,aAAc,UACd,gBAAiB,UACf,SAAU,YACR,MAAO,GACR,QAAS,GACxB,CAAS,CACT"}
{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from \"flatpickr\";\nimport \"flatpickr/dist/flatpickr.min.css\";\nimport iziToast from \"izitoast\";\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst inputForm = document.querySelector('#datetime-picker');\nconst btn = document.querySelector('button');\n\nconst daysSet = document.querySelector('span[data-days]');\nconst hoursSet = document.querySelector('span[data-hours]');\nconst minutesSet = document.querySelector('span[data-minutes]');\nconst secondsSet = document.querySelector('span[data-seconds]');\n\nlet userSelectedDate;\nlet difference;\nlet timerIntervalId;\n\nbtnOff();\ninputOn();\n\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n      userSelectedDate = selectedDates[0];\n      \n    if (userSelectedDate > new Date()) {\n      btnOn();\n    } else {\n      btnOff();\n        iziToast.show({\n            close: true,\n            message: 'Оберіть дату в майбутньому',\n            messageColor: '#FFFFFF',\n            backgroundColor: '#B51B1B',\n            position: 'topCenter',\n            close: true,\n            timeout: 5000\n        });\n    }\n},\n};\n \nflatpickr('#datetime-picker', options);\n\nbtn.addEventListener('click', onBtnStartClick);\n\nfunction onBtnStartClick(e) {\n  btnOff();\n  inputOff();\n   \n  // запускаємо інтервал в 1000мс: виводимо difference на екран \n  timerIntervalId = setInterval(() => {\n    difference = userSelectedDate - new Date();\n      \n    if (difference>1000) {\n       // конвертуємо ms в дні-години-хвилини-секунди і форматуємо в двозначний вигляд \n        const difObj = convertMs(difference);\n        const difArray = Object.values(difObj).map((elem) => String(elem).padStart(2, 0));\n        // виводимо дні-години-хвилини-секунди на екран\n        daysSet.textContent = difArray[0];\n        hoursSet.textContent = difArray[1];\n        minutesSet.textContent = difArray[2];\n        secondsSet.textContent = difArray[3];\n    } else {\n      timerIntervalStop();\n    }\n\n }, 1000);\n  \n}\n\nfunction convertMs(ms) {\n  // Number of milliseconds per unit of time\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n   const days = Math.floor(ms / day);\n   const hours = Math.floor((ms % day) / hour);\n   const minutes = Math.floor(((ms % day) % hour) / minute);\n   const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  return { days, hours, minutes, seconds };\n}\n\nfunction timerIntervalStop(e) {\n  clearInterval(timerIntervalId);\n  secondsSet.textContent = '00';\n  inputOn();\n\n  // перевірка на закінчення таймера\n  if (difference <= 1000) {\n    greeting();\n    console.log('цей час настав!')\n  } else {\n    console.log('таймер зупинено')\n  }\n} \n\nfunction greeting() {\n    iziToast.show({\n      close: true,\n      message: 'Цей час настав!',\n      messageColor: '#060695',\n      backgroundColor: '#ffff00',\n      position: 'topCenter',\n      close: true,\n      timeout: 10000\n    });\n}\n\nfunction btnOff() {\n  btn.disabled = true;\n  btn.style.backgroundColor = '#989898';\n  btn.style.boxShadow = '';\n}\n\nfunction btnOn() {\n  btn.disabled = false;\n  btn.style.backgroundColor = '#4e75ff';\n  btn.style.boxShadow = '5px 5px 18px 2px royalblue';\n}\n\nfunction inputOn() {\n  inputForm.disabled = false;\n  inputForm.style.borderColor = 'blue';\n  inputForm.style.color = '#000000;'; \n}\nfunction inputOff() {\n  inputForm.disabled = true;\n  inputForm.style.color = '#808080'; \n  inputForm.style.borderColor = '#808080';\n}"],"names":["inputForm","btn","daysSet","hoursSet","minutesSet","secondsSet","userSelectedDate","difference","timerIntervalId","btnOff","inputOn","options","selectedDates","btnOn","iziToast","flatpickr","onBtnStartClick","inputOff","difObj","convertMs","difArray","elem","timerIntervalStop","ms","days","hours","minutes","seconds","greeting"],"mappings":"+IAKA,MAAMA,EAAY,SAAS,cAAc,kBAAkB,EACrDC,EAAM,SAAS,cAAc,QAAQ,EAErCC,EAAU,SAAS,cAAc,iBAAiB,EAClDC,EAAW,SAAS,cAAc,kBAAkB,EACpDC,EAAa,SAAS,cAAc,oBAAoB,EACxDC,EAAa,SAAS,cAAc,oBAAoB,EAE9D,IAAIC,EACAC,EACAC,EAEJC,IACAC,IAEA,MAAMC,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACnBN,EAAmBM,EAAc,GAE/BN,EAAmB,IAAI,KACzBO,KAEAJ,IACEK,EAAS,KAAK,CACV,MAAO,GACP,QAAS,6BACT,aAAc,UACd,gBAAiB,UACjB,SAAU,YACV,MAAO,GACP,QAAS,GACrB,CAAS,EAET,CACA,EAEAC,EAAU,mBAAoBJ,CAAO,EAErCV,EAAI,iBAAiB,QAASe,CAAe,EAE7C,SAASA,EAAgB,EAAG,CAC1BP,IACAQ,IAGAT,EAAkB,YAAY,IAAM,CAGlC,GAFAD,EAAaD,EAAmB,IAAI,KAEhCC,EAAW,IAAM,CAEjB,MAAMW,EAASC,EAAUZ,CAAU,EAC7Ba,EAAW,OAAO,OAAOF,CAAM,EAAE,IAAKG,GAAS,OAAOA,CAAI,EAAE,SAAS,EAAG,CAAC,CAAC,EAEhFnB,EAAQ,YAAckB,EAAS,GAC/BjB,EAAS,YAAciB,EAAS,GAChChB,EAAW,YAAcgB,EAAS,GAClCf,EAAW,YAAce,EAAS,EAC1C,MACME,GAGJ,EAAE,GAAI,CAER,CAEA,SAASH,EAAUI,EAAI,CAOpB,MAAMC,EAAO,KAAK,MAAMD,EAAK,KAAG,EAC1BE,EAAQ,KAAK,MAAOF,EAAK,MAAO,IAAI,EACpCG,EAAU,KAAK,MAAQH,EAAK,MAAO,KAAQ,GAAM,EACjDI,EAAU,KAAK,MAASJ,EAAK,MAAO,KAAQ,IAAU,GAAM,EAEnE,MAAO,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC,CAEA,SAASL,EAAkB,EAAG,CAC5B,cAAcd,CAAe,EAC7BH,EAAW,YAAc,KACzBK,IAGIH,GAAc,KAChBqB,IACA,QAAQ,IAAI,iBAAiB,GAE7B,QAAQ,IAAI,iBAAiB,CAEjC,CAEA,SAASA,GAAW,CAChBd,EAAS,KAAK,CACZ,MAAO,GACP,QAAS,kBACT,aAAc,UACd,gBAAiB,UACjB,SAAU,YACV,MAAO,GACP,QAAS,GACf,CAAK,CACL,CAEA,SAASL,GAAS,CAChBR,EAAI,SAAW,GACfA,EAAI,MAAM,gBAAkB,UAC5BA,EAAI,MAAM,UAAY,EACxB,CAEA,SAASY,GAAQ,CACfZ,EAAI,SAAW,GACfA,EAAI,MAAM,gBAAkB,UAC5BA,EAAI,MAAM,UAAY,4BACxB,CAEA,SAASS,GAAU,CACjBV,EAAU,SAAW,GACrBA,EAAU,MAAM,YAAc,OAC9BA,EAAU,MAAM,MAAQ,UAC1B,CACA,SAASiB,GAAW,CAClBjB,EAAU,SAAW,GACrBA,EAAU,MAAM,MAAQ,UACxBA,EAAU,MAAM,YAAc,SAChC"}